!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.Pagination=t()}("undefined"!=typeof self?self:this,function(){"use strict";var t=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n};var e=function(e){this.options={curr:1,pageShow:2,ellipsis:!0,hash:!1},function(e,t,n){for(var i in t)!t.hasOwnProperty(i)||e.hasOwnProperty(i)&&!n||(e[i]=t[i])}(this.options,e,!0),this.pageElement=document.getElementById(this.options.elem),this.dataCount=this.options.count,this.pageNumber=this.options.curr,this.pageCount=Math.ceil(this.options.count/this.options.limit),this.renderPages(),this.options.callback&&this.options.callback({curr:this.pageNumber,limit:this.options.limit,isFirst:!0}),this.changePage()};return e.prototype={construct:e,pageInfos:[{id:"first",className:"",content:"首页"},{id:"prev",className:"",content:"前一页"},{id:"next",className:"",content:"后一页"},{id:"last",className:"",content:"尾页"},{id:"",className:"",content:"..."},{id:"page",className:"",content:"1"}],getPageInfos:function(e,t){return{id:"page",className:e,content:t}},changePage:function(){var i=this,e=i.pageElement;t(e,"click",function(e){var t=e||window.event,n=t.target||t.srcElement;if("a"==n.nodeName.toLocaleLowerCase()){if("prev"===n.id)i.prevPage();else if("next"===n.id)i.nextPage();else if("first"===n.id)i.firstPage();else if("last"===n.id)i.lastPage();else{if("page"!==n.id)return;i.goPage(parseInt(n.innerHTML))}i.renderPages(),i.options.callback&&i.options.callback({curr:i.pageNumber,limit:i.options.limit,isFirst:!1}),i.pageHash()}})},pageHash:function(){this.options.hash&&(window.location.hash="#!"+this.options.hash+"="+this.pageNumber)},renderPages:function(){this.pageElement.innerHTML="",this.options.ellipsis?this.pageElement.appendChild(this.renderEllipsis()):this.pageElement.appendChild(this.renderNoEllipsis())},renderNoEllipsis:function(){var e=document.createDocumentFragment(),t=n%2==0?2:1,n=2*this.options.pageShow+1;return this.pageNumber<(n+t)/2?e.appendChild(this.renderFirst(n)):this.pageCount-this.pageNumber<(n-t)/2?e.appendChild(this.renderLast(n)):e.appendChild(this.renderCenter(n)),1<this.pageNumber&&this.addFragmentBefore(e,[this.pageInfos[0],this.pageInfos[1]]),this.pageNumber<this.pageCount&&this.addFragmentAfter(e,[this.pageInfos[2],this.pageInfos[3]]),e},renderEllipsis:function(){var e=document.createDocumentFragment();this.addFragmentAfter(e,[this.getPageInfos("current",this.pageNumber)]);for(var t=1;t<=this.options.pageShow;t++)1<this.pageNumber-t&&this.addFragmentBefore(e,[this.getPageInfos("",this.pageNumber-t)]),this.pageNumber+t<this.pageCount&&this.addFragmentAfter(e,[this.getPageInfos("",this.pageNumber+t)]);return 1<this.pageNumber-(this.options.pageShow+1)&&this.addFragmentBefore(e,[this.pageInfos[4]]),1<this.pageNumber&&this.addFragmentBefore(e,[this.pageInfos[0],this.pageInfos[1],this.pageInfos[5]]),this.pageNumber+this.options.pageShow+1<this.pageCount&&this.addFragmentAfter(e,[this.pageInfos[4]]),this.pageNumber<this.pageCount&&this.addFragmentAfter(e,[this.getPageInfos("",this.pageCount),this.pageInfos[2],this.pageInfos[3]]),e},addFragmentBefore:function(e,t){e.insertBefore(this.createHtml(t),e.firstChild)},addFragmentAfter:function(e,t){e.appendChild(this.createHtml(t))},createHtml:function(e){var n=document.createDocumentFragment(),i=document.createElement("li"),s=document.createElement("a");return e.forEach(function(e,t){i=i.cloneNode(!1),(s=s.cloneNode(!1)).setAttribute("href","javascript:;"),s.setAttribute("id",e.id),s.setAttribute("class",e.className),s.innerHTML=e.content,i.appendChild(s),n.appendChild(i)}),n},renderFirst:function(e){return this.pageCount<e?this.renderDom(1,this.pageCount):this.renderDom(1,e)},renderLast:function(e){return this.pageCount<e?this.renderDom(1,this.pageCount):this.renderDom(this.pageCount-e+1,this.pageCount)},renderCenter:function(e){var t=e%2==0?this.pageNumber-e/2:this.pageNumber-(e-1)/2,n=e%2==0?this.pageNumber+(e-2)/2:this.pageNumber+(e-1)/2;return this.renderDom(t,n)},renderDom:function(e,t){for(var n=document.createDocumentFragment(),i="",s=e;s<=t;s++)i=this.pageNumber===s?"current":"",this.addFragmentAfter(n,[this.getPageInfos(i,s)]);return n},prevPage:function(){this.pageNumber--},nextPage:function(){this.pageNumber++},goPage:function(e){this.pageNumber=e},firstPage:function(){this.pageNumber=1},lastPage:function(){this.pageNumber=this.pageCount}},e});